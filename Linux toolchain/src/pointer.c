#include <stdio.h>
#include <string.h>

int main(int argc, char **argv) {
    int foo = 42;
    printf("foo @ %p = %d\n", &foo, foo);

    // It raises warning to cast int* to short*
    // You can cast any pointer to void*
    // You can cast void* to any pointer

    short *bar = (void *)&foo;
    printf("bar @ %p = %d\n", bar, *bar);

    char *baz = (void *)bar;
    printf("baz @ %p = %s\n", baz, baz);

    // Changes through pointer make changes to the original memory location

    *baz = 'A';
    printf("=> *baz = 'A'\n");
    printf("foo @ %p = %d\n", &foo, foo);
    printf("bar @ %p = %d\n", bar, *bar);
    printf("baz @ %p = %s\n", baz, baz);

    *bar = 12345;
    printf("=> *bar = 12345\n");
    printf("foo @ %p = %d\n", &foo, foo);
    printf("bar @ %p = %d\n", bar, *bar);
    printf("baz @ %p = %s\n", baz, baz);

    // Although the data in the memory is the same, the interpretation of
    // that data is different

    foo = 0x006c6f4c;
    printf("=> foo = 1234567890\n");
    printf("foo @ %p = %d\n", &foo, foo);
    printf("bar @ %p = %d\n", bar, *bar);
    printf("baz @ %p = %s\n", baz, baz);

    // As long as we stay within the bounds of the original data
    // (4 bytes, see types.c) we can even treat it as a string (char array)

    strcpy(baz, "Nop");
    printf("=> strcpy(baz, \"Nop\")\n");
    printf("foo @ %p = %d\n", &foo, foo);
    printf("bar @ %p = %d\n", bar, *bar);
    printf("baz @ %p = %s\n", baz, baz);
}
