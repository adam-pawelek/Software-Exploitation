#include <stdio.h>
#include <unistd.h>

int main(int argc, char **argv) {
    // isatty() tests whether a file decriptor (in this case stdin)
    // refers to a terminal.

    // You can use pipe or redirection to change standard input
    // from terminal to file.

    if (isatty(STDIN_FILENO)) {
        fprintf(stderr, "Nope.\n");
    } else {
        fprintf(stderr, "Nicely done, input is not a terminal.\n");
    }

    // You can use pipe or redirection to change standard output
    // from terminal to file.

    if (!isatty(STDOUT_FILENO)) {
        fprintf(stderr, "Output is not a terminal.\n");
    }

    // You can use pipe or redirection to change standard output
    // from terminal to file.

    if (!isatty(STDERR_FILENO)) {
        fprintf(stdout, "You deserve a cookie.\n");
    }

    if (!isatty(STDIN_FILENO) && !isatty(STDOUT_FILENO) &&
        !isatty(STDERR_FILENO)) {
        FILE *fd = fopen("cookie", "w+");
        fprintf(fd, "Here, have a cookie.\n");
        fclose(fd);
    }

    return 0;
}
