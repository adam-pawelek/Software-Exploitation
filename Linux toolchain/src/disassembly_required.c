#include <stdio.h>

enum color {
    RED,
    GREEN,
    BLUE,
    SHINY,
};

struct unicorn {
    char *name;
    enum color color;
};

// declare static mapping between color enum and color names
// enum --> string
static char *colornames[] = {
    [RED] = "red",
    [GREEN] = "green",
    [BLUE] = "blue",
    [SHINY] = "shiny",
};

char *strcolor(enum color color) { return colornames[color]; }

int magical_unicorn(char *name, enum color color) {
    int len;

    printf("\"%s\" is a %s magical unicorn%n", name, strcolor(color), &len);

    return len;
}

int magical_unicorn_struct(struct unicorn *unicorn) {
    return magical_unicorn(unicorn->name, unicorn->color);
}

int main(int argc, char **argv) {
    printf(" (len=%d)\n", magical_unicorn("foo", RED));
    printf(" (len=%d)\n", magical_unicorn("bar", GREEN));
    printf(" (len=%d)\n", magical_unicorn("baz", BLUE));

    struct unicorn u = {
        .name = "qux",
        .color = SHINY,
    };

    printf(" (len=%d)\n", magical_unicorn_struct(&u));
}
